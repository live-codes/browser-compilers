var BBob=(()=>{var be=Object.create;var Et=Object.defineProperty;var Se=Object.getOwnPropertyDescriptor;var ye=Object.getOwnPropertyNames;var Le=Object.getPrototypeOf,me=Object.prototype.hasOwnProperty;var Ut=t=>Et(t,"__esModule",{value:!0});var Nt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),_e=(t,e)=>{Ut(t);for(var s in e)Et(t,s,{get:e[s],enumerable:!0})},pe=(t,e,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let N of ye(e))!me.call(t,N)&&N!=="default"&&Et(t,N,{get:()=>e[N],enumerable:!(s=Se(e,N))||s.enumerable});return t},bt=t=>pe(Ut(Et(t!=null?be(Le(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var yt=Nt((St,Vt)=>{(function(t,e){typeof St=="object"&&typeof Vt!="undefined"?e(St):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.BbobPluginHelper={}))})(St,function(t){"use strict";let e=`
`,s="	",N="\f",E="\r",C="=",d='"',x=" ",m="[",f="]",b="/",T="\\",A=o=>typeof o=="object"&&!!o.tag,K=o=>typeof o=="string",H=o=>o===e,q=(o,a,l)=>Object.keys(o).reduce(a,l),tt=o=>A(o)?o.content.reduce((a,l)=>a+tt(l),0):K(o)?o.length:0,L=(o,a)=>{o.content.push(a)},et=o=>o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/(javascript|data|vbscript):/gi,"$1%3A"),nt=(o,a)=>{let l=typeof a,P={boolean:()=>a?`${o}`:"",number:()=>`${o}="${a}"`,string:()=>`${o}="${et(a)}"`,object:()=>`${o}="${et(JSON.stringify(a))}"`};return P[l]?P[l]():""},ft=o=>o==null?"":q(o,(a,l)=>[...a,nt(l,o[l])],[""]).join(" "),lt=o=>q(o,(a,l)=>o[l]===l?o[l]:null,null),Ct=(o,a)=>{let l=lt(a);if(l){let P=nt(o,l),ot={...a};delete ot[l];let it=ft(ot);return`${P}${it}`}return`${o}${ft(a)}`};class D{attr(a,l){return typeof l!="undefined"&&(this.attrs[a]=l),this.attrs[a]}append(a){return L(this,a)}get length(){return tt(this)}toTagStart({openTag:a=m,closeTag:l=f}={}){let P=Ct(this.tag,this.attrs);return`${a}${P}${l}`}toTagEnd({openTag:a=m,closeTag:l=f}={}){return`${a}${b}${this.tag}${l}`}toTagNode(){return new D(this.tag.toLowerCase(),this.attrs,this.content)}toString({openTag:a=m,closeTag:l=f}={}){let P=this.content.length===0,ot=this.content.reduce((Ot,dt)=>Ot+dt.toString({openTag:a,closeTag:l}),""),it=this.toTagStart({openTag:a,closeTag:l});return P?it:`${it}${ot}${this.toTagEnd({openTag:a,closeTag:l})}`}constructor(a,l,P){this.tag=a,this.attrs=l,this.content=Array.isArray(P)?P:[P]}}D.create=(o,a={},l=[])=>new D(o,a,l),D.isOf=(o,a)=>o.tag===a,t.BACKSLASH=T,t.CLOSE_BRAKET=f,t.EQ=C,t.F=N,t.N=e,t.OPEN_BRAKET=m,t.QUOTEMARK=d,t.R=E,t.SLASH=b,t.SPACE=x,t.TAB=s,t.TagNode=D,t.appendToNode=L,t.attrValue=nt,t.attrsToString=ft,t.escapeHTML=et,t.getNodeLength=tt,t.getUniqAttr=lt,t.isEOL=H,t.isStringNode=K,t.isTagNode=A})});var Ft=Nt((Lt,kt)=>{(function(t,e){typeof Lt=="object"&&typeof kt!="undefined"?e(Lt,yt()):typeof define=="function"&&define.amd?define(["exports","@bbob/plugin-helper"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.BbobParser={},t.pluginHelper))})(Lt,function(t,e){"use strict";let s="type",N="value",E="row",C="line",d=1,x=2,m=3,f=4,b=5,T=6,A=n=>n&&typeof n[N]!="undefined"?n[N]:"",K=n=>n&&n[C]||0,H=n=>n&&n[E]||0,q=n=>n&&typeof n[s]!="undefined"?n[s]===b||n[s]===T||n[s]===d:!1,tt=n=>n&&typeof n[s]!="undefined"?n[s]===x:!1,L=n=>A(n).charCodeAt(0)===e.SLASH.charCodeAt(0),et=n=>!L(n),nt=n=>n&&typeof n[s]!="undefined"?n[s]===m:!1,ft=n=>n&&typeof n[s]!="undefined"?n[s]===f:!1,lt=n=>{let u=A(n);return L(n)?u.slice(1):u},Ct=n=>{let u=e.OPEN_BRAKET;return u+=A(n),u+=e.CLOSE_BRAKET,u};class D{isEmpty(){return isNaN(this[s])}isText(){return q(this)}isTag(){return tt(this)}isAttrName(){return nt(this)}isAttrValue(){return ft(this)}isStart(){return et(this)}isEnd(){return L(this)}getName(){return lt(this)}getValue(){return A(this)}getLine(){return K(this)}getColumn(){return H(this)}toString(){return Ct(this)}constructor(u,i,R,Q){this[s]=Number(u),this[N]=String(i),this[C]=Number(R),this[E]=Number(Q)}}let o=d,a=x,l=m,P=f,ot=b,it=T;function Ot(n,u){let i={pos:0,len:n.length},R=S=>{let{pos:_}=i,w=n.indexOf(S,_);return w>=0?n.substring(_,w):""},Q=S=>n.indexOf(S,i.pos)>=0,$=()=>i.len>i.pos,B=()=>i.pos===i.len,v=(S=1,_)=>{i.pos+=S,u&&u.onSkip&&!_&&u.onSkip()},G=()=>n.substring(i.pos),Y=(S=0)=>n.substring(i.pos,i.pos+S),W=()=>n[i.pos],I=()=>{let S=i.pos-1;return typeof n[S]!="undefined"?n[S]:null},z=()=>{let S=i.pos+1;return S<=n.length-1?n[S]:null},U=(S,_)=>{let w=0;if($())for(w=i.pos;$()&&S(W());)v(1,_);return n.substring(w,i.pos)};this.skip=v,this.hasNext=$,this.getCurr=W,this.getRest=G,this.getNext=z,this.getPrev=I,this.isLast=B,this.includes=Q,this.grabWhile=U,this.grabN=Y,this.substrUntilChar=R}let dt=(n,u)=>new Ot(n,u),ne=(n,u)=>{for(;n.charAt(0)===u;)n=n.substring(1);for(;n.charAt(n.length-1)===u;)n=n.substring(0,n.length-1);return n},se=n=>n.replace(e.BACKSLASH+e.QUOTEMARK,e.QUOTEMARK);function re(n=[]){let u=n,i=()=>Array.isArray(u)&&u.length>0&&typeof u[u.length-1]!="undefined"?u[u.length-1]:null,R=()=>u.length?u.pop():!1,Q=B=>u.push(B),$=()=>u;this.push=Q,this.toArray=$,this.getLast=i,this.flushLast=R}let ht=(n=[])=>new re(n),oe="!",ie=(n,u,i=0,R=0)=>new D(n,u,i,R);function ce(n,u={}){let i=0,R=1,Q=2,$=0,B=1,v=2,G=0,Y=0,W=-1,I=i,z=$,U="",S=new Array(Math.floor(n.length)),_=u.openTag||e.OPEN_BRAKET,w=u.closeTag||e.CLOSE_BRAKET,gt=!!u.enableEscapeTags,J=u.contextFreeTags||[],Pt=u.onToken||(()=>{}),Rt=[w,_,e.QUOTEMARK,e.BACKSLASH,e.SPACE,e.TAB,e.EQ,e.N,oe],wt=[_,e.SPACE,e.TAB,e.N],Kt=[e.SPACE,e.TAB],$t=[e.EQ,e.SPACE,e.TAB],Tt=c=>Rt.indexOf(c)>=0,r=c=>c===e.N,h=c=>Kt.indexOf(c)>=0,y=c=>wt.indexOf(c)===-1,X=c=>$t.indexOf(c)>=0,st=c=>c===_||c===w||c===e.BACKSLASH,jt=c=>c===e.BACKSLASH,xt=()=>{Y++},Qt=c=>se(ne(c,e.QUOTEMARK)),Wt=(c,p)=>{U!==""&&p&&(U=""),U===""&&J.includes(c)&&(U=c)},g=dt(n,{onSkip:xt});function M(c,p){let O=ie(c,p,G,Y);Pt(O),W+=1,S[W]=O}function ae(c,p){if(z===B){let k=At=>!(At===e.EQ||h(At)),rt=c.grabWhile(k),ct=c.isLast(),at=c.getCurr()!==e.EQ;return c.skip(),ct||at?M(P,Qt(rt)):M(l,rt),ct?$:at?B:v}if(z===v){let k=!1,rt=at=>{let At=at===e.QUOTEMARK,he=c.getPrev(),It=c.getNext(),ge=he===e.BACKSLASH,Ae=It===e.EQ,Ee=h(at),Ne=h(It);return k&&X(at)?!0:At&&!ge&&(k=!k,!k&&!(Ae||Ne))?!1:p?!0:Ee===!1},ct=c.grabWhile(rt);return c.skip(),M(P,Qt(ct)),c.isLast()?$:B}let O=k=>!(k===e.EQ||h(k)||c.isLast()),V=c.grabWhile(O);return M(a,V),Wt(V),c.skip(),p?v:c.includes(e.EQ)?B:v}function ue(){let c=g.getCurr(),p=g.getNext();g.skip();let O=g.substrUntilChar(w),V=O.length===0||O.indexOf(_)>=0;if(Tt(p)||V||g.isLast())return M(o,c),i;let Z=O.indexOf(e.EQ)===-1,k=O[0]===e.SLASH;if(Z||k){let rt=g.grabWhile(ct=>ct!==w);return g.skip(),M(a,rt),Wt(rt,k),i}return Q}function fe(){let c=!0,p=g.grabWhile(Z=>Z!==w,c),O=dt(p,{onSkip:xt}),V=O.includes(e.SPACE);for(z=$;O.hasNext();)z=ae(O,!V);return g.skip(),i}function Te(){if(r(g.getCurr()))return M(it,g.getCurr()),g.skip(),Y=0,G++,i;if(h(g.getCurr())){let p=g.grabWhile(h);return M(ot,p),i}if(g.getCurr()===_){if(U){let p=_.length+e.SLASH.length+U.length,O=`${_}${e.SLASH}${U}`;if(g.grabN(p)===O)return R}else if(g.includes(w))return R;return M(o,g.getCurr()),g.skip(),i}if(gt){if(jt(g.getCurr())){let V=g.getCurr(),Z=g.getNext();return g.skip(),st(Z)?(g.skip(),M(o,Z),i):(M(o,V),i)}let p=V=>y(V)&&!jt(V),O=g.grabWhile(p);return M(o,O),i}let c=g.grabWhile(y);return M(o,c),i}function le(){for(I=i;g.hasNext();)switch(I){case R:I=ue();break;case Q:I=fe();break;case i:default:I=Te();break}return S.length=W+1,S}function de(c){let p=_+e.SLASH+c.getValue();return n.indexOf(p)>-1}return{tokenize:le,isTokenNested:de}}let Mt=(n,u={})=>{let i=u,R=i.openTag||e.OPEN_BRAKET,Q=i.closeTag||e.CLOSE_BRAKET,$=(i.onlyAllowTags||[]).filter(Boolean).map(r=>r.toLowerCase()),B=null,v=ht(),G=ht(),Y=ht(),W=ht(),I=new Set,z=r=>{let h=r.getValue();return!I.has(h)&&B.isTokenNested&&B.isTokenNested(r)?(I.add(h),!0):I.has(h)},U=r=>Boolean(I.has(r)),S=r=>$.length?$.indexOf(r.toLowerCase())>=0:!0,_=()=>{Y.flushLast()&&W.flushLast()},w=()=>{let r=G.getLast();return r&&Array.isArray(r.content)?r.content:v.toArray()},gt=(r,h=!0)=>{let y=w();Array.isArray(y)&&(y.push(r.toTagStart({openTag:R,closeTag:Q})),r.content.length&&(r.content.forEach(X=>{y.push(X)}),h&&y.push(r.toTagEnd({openTag:R,closeTag:Q}))))},J=r=>{let h=w();Array.isArray(h)&&(e.isTagNode(r)?S(r.tag)?h.push(r.toTagNode()):gt(r):h.push(r))},Pt=r=>{_();let h=e.TagNode.create(r.getValue()),y=z(r);Y.push(h),y?G.push(h):J(h)},Rt=r=>{_();let h=G.flushLast();if(h)J(h);else if(typeof i.onError=="function"){let y=r.getValue(),X=r.getLine(),st=r.getColumn();i.onError({message:`Inconsistent tag '${y}' on line ${X} and column ${st}`,tagName:y,lineNumber:X,columnNumber:st})}},wt=r=>{r.isStart()&&Pt(r),r.isEnd()&&Rt(r)},Kt=r=>{let h=Y.getLast(),y=r.getValue(),X=U(r);if(h)if(r.isAttrName())W.push(y),h.attr(W.getLast(),"");else if(r.isAttrValue()){let st=W.getLast();st?(h.attr(st,y),W.flushLast()):h.attr(y,y)}else r.isText()?X?h.append(y):J(y):r.isTag()&&J(r.toString());else r.isText()?J(y):r.isTag()&&J(r.toString())},$t=r=>{r.isTag()?wt(r):Kt(r)};B=(u.createTokenizer?u.createTokenizer:ce)(n,{onToken:$t,openTag:R,closeTag:Q,onlyAllowTags:i.onlyAllowTags,contextFreeTags:i.contextFreeTags,enableEscapeTags:i.enableEscapeTags}),B.tokenize();let Tt=G.flushLast();return Tt&&U(Tt.tag)&&gt(Tt,!1),v.toArray()};Object.defineProperty(t,"TagNode",{enumerable:!0,get:function(){return e.TagNode}}),t.default=Mt,t.parse=Mt,Object.defineProperty(t,"__esModule",{value:!0})})});var Gt=Nt((mt,vt)=>{(function(t,e){typeof mt=="object"&&typeof vt!="undefined"?e(mt,Ft()):typeof define=="function"&&define.amd?define(["exports","@bbob/parser"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.BbobCore={},t.parser))})(mt,function(t,e){"use strict";let s=f=>typeof f=="object",N=f=>typeof f=="boolean";function E(f,b){let T=f;if(Array.isArray(T))for(let A=0;A<T.length;A++)T[A]=E(b(T[A]),b);else T&&s(T)&&T.content&&E(T.content,b);return T}function C(f,b){return typeof f!=typeof b?!1:!s(f)||f===null?f===b:Array.isArray(f)?f.every(T=>[].some.call(b,A=>C(T,A))):Object.keys(f).every(T=>{let A=b[T],K=f[T];return s(K)&&K!==null&&A!==null?C(K,A):N(K)?K!==(A===null):A===K})}function d(f,b){return Array.isArray(f)?E(this,T=>{for(let A=0;A<f.length;A++)if(C(f[A],T))return b(T);return T}):E(this,T=>C(f,T)?b(T):T)}function x(f){return E(this,f)}function m(f){let b=typeof f=="function"?[f]:f||[],T={skipParse:!1};return{process(A,K){T=K||{};let H=T.parser||e.parse,q=T.render,tt=T.data||null;if(typeof H!="function")throw new Error('"parser" is not a function, please pass to "process(input, { parser })" right function');let L=T.skipParse?A||[]:H(A,T),et=L;return L.messages=[],L.options=T,L.walk=x,L.match=d,b.forEach(nt=>{L=nt(L,{parse:H,render:q,iterate:E,match:d,data:tt})||L}),{get html(){if(typeof q!="function")throw new Error('"render" function not defined, please pass to "process(input, { render })"');return q(L,L.options)},tree:L,raw:et,messages:L.messages}}}}t.default=m,Object.defineProperty(t,"__esModule",{value:!0})})});var Xt=Nt((pt,Jt)=>{(function(t,e){typeof pt=="object"&&typeof Jt!="undefined"?e(pt):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.BbobPreset={}))})(pt,function(t){"use strict";let e=E=>typeof E=="object"&&!!E.tag;function s(E,C,d,x){C.walk(m=>e(m)&&E[m.tag]?E[m.tag](m,d,x):m)}function N(E,C=s){let d=(x={})=>{d.options=Object.assign(d.options||{},x);let m=(f,b)=>C(E,f,b,d.options);return m.options=d.options,m};return d.extend=x=>N(x(E,d.options),C),d}t.createPreset=N,t.default=N,Object.defineProperty(t,"__esModule",{value:!0})})});var Me={};_e(Me,{bbobHTML:()=>zt,presetHTML5:()=>ee});var Yt=bt(Gt()),Bt=bt(yt()),Ce="/>",Oe="</",qt="<",Dt=">",Pe=(t,{stripTags:e=!1})=>{if(!t)return"";let s=typeof t;return s==="string"||s==="number"?t:s==="object"?e===!0?_t(t.content,{stripTags:e}):t.content===null?[qt,t.tag,(0,Bt.attrsToString)(t.attrs),Ce].join(""):[qt,t.tag,(0,Bt.attrsToString)(t.attrs),Dt,_t(t.content),Oe,t.tag,Dt].join(""):Array.isArray(t)?_t(t,{stripTags:e}):""},_t=(t,{stripTags:e=!1}={})=>[].concat(t).reduce((s,N)=>s+Pe(N,{stripTags:e}),""),Re=(t,e,s)=>(0,Yt.default)(e).process(t,{...s,render:_t}).html;var zt=Re;var te=bt(Xt());var j=bt(yt()),we=(t,e)=>t[0]===e,Zt={color:t=>`color:${t};`,size:t=>`font-size:${t};`},Ke=t=>Object.keys(t).reduce((e,s)=>Zt[s]?e.concat(Zt[s](t[s])):e,[]).join(" "),$e=t=>{let e=0,s=[],N=()=>j.TagNode.create("li"),E=d=>{s[e]=s[e]||d},C=d=>{s[e]&&s[e].content?s[e].content=s[e].content.concat(d):s[e]=s[e].concat(d)};return t.forEach(d=>{(0,j.isStringNode)(d)&&we(d,"*")?(s[e]&&e++,E(N()),C(d.substr(1))):(0,j.isTagNode)(d)&&j.TagNode.isOf(d,"*")?(s[e]&&e++,E(N())):(0,j.isTagNode)(s[e])?s[e]?C(d):E(d):(e++,E(d))}),[].concat(s)},Be=(t,e)=>(0,j.getUniqAttr)(t.attrs)?(0,j.getUniqAttr)(t.attrs):e(t.content),F=(t,e,s)=>({tag:t,attrs:e,content:s}),ut=t=>({style:t}),Ht={b:t=>F("span",ut("font-weight: bold;"),t.content),i:t=>F("span",ut("font-style: italic;"),t.content),u:t=>F("span",ut("text-decoration: underline;"),t.content),s:t=>F("span",ut("text-decoration: line-through;"),t.content),url:(t,{render:e},s)=>F("a",{href:Be(t,e,s)},t.content),img:(t,{render:e})=>F("img",{src:e(t.content)},null),quote:t=>F("blockquote",{},[F("p",{},t.content)]),code:t=>F("pre",{},t.content),style:t=>F("span",ut(Ke(t.attrs)),t.content),list:t=>{let e=(0,j.getUniqAttr)(t.attrs);return F(e?"ol":"ul",e?{type:e}:{},$e(t.content))},color:t=>F("span",ut(`color: ${(0,j.getUniqAttr)(t.attrs)};`),t.content)};var ee=(0,te.createPreset)(Ht);return Me;})();
